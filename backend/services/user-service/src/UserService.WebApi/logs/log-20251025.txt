2025-10-25 13:01:54.379 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-10-25 13:01:54.436 +03:00 [INF] Now listening on: http://localhost:5067
2025-10-25 13:01:54.437 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-25 13:01:54.437 +03:00 [INF] Hosting environment: Development
2025-10-25 13:01:54.437 +03:00 [INF] Content root path: /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi
2025-10-25 13:02:00.816 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5067/auth/login - application/json 50
2025-10-25 13:02:00.830 +03:00 [WRN] Failed to determine the https port for redirect.
2025-10-25 13:02:00.831 +03:00 [INF] CORS policy execution successful.
2025-10-25 13:02:00.833 +03:00 [INF] Executing endpoint 'HTTP: POST /auth/login'
2025-10-25 13:02:00.838 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-25 13:02:00.874 +03:00 [INF] Starting Keycloak login for a@a.com
2025-10-25 13:02:00.960 +03:00 [ERR] Exception during Keycloak login for a@a.com
Flurl.Http.FlurlHttpException: Call failed with status code 401 (Unauthorized): POST http://localhost:8080/realms/campuwise/protocol/openid-connect/token
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.LoginAsync(String email, String password) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 30
2025-10-25 13:02:01.056 +03:00 [INF] Executed endpoint 'HTTP: POST /auth/login'
2025-10-25 13:02:01.063 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Flurl.Http.FlurlHttpException: Call failed with status code 401 (Unauthorized): POST http://localhost:8080/realms/campuwise/protocol/openid-connect/token
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.LoginAsync(String email, String password) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 30
   at UserService.Application.User.Commands.LoginCommandHandler.Handle(LoginCommand request, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/User/Commands/LoginCommand.cs:line 37
   at UserService.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/Behaviors/ValidationBehavior.cs:line 49
   at UserService.WebApi.Modules.AuthModule.<>c.<<RegisterAuthRoutes>b__0_0>d.MoveNext() in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi/Modules/AuthModule.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfTFast>g__ExecuteAwaited|131_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 13:02:01.065 +03:00 [ERR] External service call failed
Flurl.Http.FlurlHttpException: Call failed with status code 401 (Unauthorized): POST http://localhost:8080/realms/campuwise/protocol/openid-connect/token
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.LoginAsync(String email, String password) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 30
   at UserService.Application.User.Commands.LoginCommandHandler.Handle(LoginCommand request, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/User/Commands/LoginCommand.cs:line 37
   at UserService.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/Behaviors/ValidationBehavior.cs:line 49
   at UserService.WebApi.Modules.AuthModule.<>c.<<RegisterAuthRoutes>b__0_0>d.MoveNext() in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi/Modules/AuthModule.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfTFast>g__ExecuteAwaited|131_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 13:02:02.673 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5067/auth/login - 401 null application/json; charset=utf-8 1858.7317ms
2025-10-25 13:03:29.333 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-10-25 13:03:29.388 +03:00 [INF] Now listening on: http://localhost:5067
2025-10-25 13:03:29.389 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-25 13:03:29.389 +03:00 [INF] Hosting environment: Development
2025-10-25 13:03:29.389 +03:00 [INF] Content root path: /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi
2025-10-25 13:03:32.671 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5067/auth/login - application/json 50
2025-10-25 13:03:32.684 +03:00 [WRN] Failed to determine the https port for redirect.
2025-10-25 13:03:32.685 +03:00 [INF] CORS policy execution successful.
2025-10-25 13:03:32.687 +03:00 [INF] Executing endpoint 'HTTP: POST /auth/login'
2025-10-25 13:03:32.691 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-25 13:03:32.726 +03:00 [INF] Starting Keycloak login for a@a.com
2025-10-25 13:03:32.819 +03:00 [ERR] Call failed with status code 401 (Unauthorized): POST http://localhost:8080/realms/campuwise/protocol/openid-connect/token for a@a.com
Flurl.Http.FlurlHttpException: Call failed with status code 401 (Unauthorized): POST http://localhost:8080/realms/campuwise/protocol/openid-connect/token
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.LoginAsync(String email, String password) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 30
2025-10-25 13:03:32.948 +03:00 [INF] Executed endpoint 'HTTP: POST /auth/login'
2025-10-25 13:03:32.957 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Flurl.Http.FlurlHttpException: Call failed with status code 401 (Unauthorized): POST http://localhost:8080/realms/campuwise/protocol/openid-connect/token
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.LoginAsync(String email, String password) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 30
   at UserService.Application.User.Commands.LoginCommandHandler.Handle(LoginCommand request, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/User/Commands/LoginCommand.cs:line 37
   at UserService.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/Behaviors/ValidationBehavior.cs:line 49
   at UserService.WebApi.Modules.AuthModule.<>c.<<RegisterAuthRoutes>b__0_0>d.MoveNext() in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi/Modules/AuthModule.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfTFast>g__ExecuteAwaited|131_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 13:03:32.959 +03:00 [ERR] External service call failed
Flurl.Http.FlurlHttpException: Call failed with status code 401 (Unauthorized): POST http://localhost:8080/realms/campuwise/protocol/openid-connect/token
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.LoginAsync(String email, String password) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 30
   at UserService.Application.User.Commands.LoginCommandHandler.Handle(LoginCommand request, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/User/Commands/LoginCommand.cs:line 37
   at UserService.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/Behaviors/ValidationBehavior.cs:line 49
   at UserService.WebApi.Modules.AuthModule.<>c.<<RegisterAuthRoutes>b__0_0>d.MoveNext() in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi/Modules/AuthModule.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfTFast>g__ExecuteAwaited|131_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 13:03:34.450 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5067/auth/login - 401 null application/json; charset=utf-8 1780.4809ms
2025-10-25 16:16:22.167 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-10-25 16:16:22.227 +03:00 [INF] Now listening on: http://localhost:5067
2025-10-25 16:16:22.228 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-25 16:16:22.228 +03:00 [INF] Hosting environment: Development
2025-10-25 16:16:22.228 +03:00 [INF] Content root path: /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi
2025-10-25 16:16:40.743 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5067/auth/register - application/json 86
2025-10-25 16:16:40.753 +03:00 [WRN] Failed to determine the https port for redirect.
2025-10-25 16:16:40.756 +03:00 [INF] Executing endpoint 'HTTP: POST /auth/register'
2025-10-25 16:16:40.761 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-25 16:16:41.149 +03:00 [INF] Executed endpoint 'HTTP: POST /auth/register'
2025-10-25 16:16:41.157 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Flurl.Http.FlurlHttpException: Call failed with status code 401 (Unauthorized): POST http://localhost:8080/admin/realms/campuwise/users
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.RegisterAsync(String fullName, String password, String email) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 89
   at UserService.Application.User.Commands.RegisterCommandHandler.Handle(RegisterCommand request, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/User/Commands/RegisterCommand.cs:line 42
   at UserService.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/Behaviors/ValidationBehavior.cs:line 49
   at UserService.WebApi.Modules.AuthModule.<>c.<<RegisterAuthRoutes>b__0_1>d.MoveNext() in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi/Modules/AuthModule.cs:line 31
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 16:16:41.168 +03:00 [ERR] External service call failed
Flurl.Http.FlurlHttpException: Call failed with status code 401 (Unauthorized): POST http://localhost:8080/admin/realms/campuwise/users
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.RegisterAsync(String fullName, String password, String email) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 89
   at UserService.Application.User.Commands.RegisterCommandHandler.Handle(RegisterCommand request, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/User/Commands/RegisterCommand.cs:line 42
   at UserService.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/Behaviors/ValidationBehavior.cs:line 49
   at UserService.WebApi.Modules.AuthModule.<>c.<<RegisterAuthRoutes>b__0_1>d.MoveNext() in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi/Modules/AuthModule.cs:line 31
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 16:16:45.686 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5067/auth/register - 401 null application/json; charset=utf-8 4943.5767ms
2025-10-25 16:16:54.042 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5067/auth/register - application/json 86
2025-10-25 16:16:54.047 +03:00 [INF] Executing endpoint 'HTTP: POST /auth/register'
2025-10-25 16:17:11.622 +03:00 [INF] Executed endpoint 'HTTP: POST /auth/register'
2025-10-25 16:17:11.632 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Flurl.Http.FlurlHttpException: Call failed with status code 401 (Unauthorized): POST http://localhost:8080/admin/realms/campuwise/users
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.RegisterAsync(String fullName, String password, String email) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 89
   at UserService.Application.User.Commands.RegisterCommandHandler.Handle(RegisterCommand request, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/User/Commands/RegisterCommand.cs:line 42
   at UserService.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/Behaviors/ValidationBehavior.cs:line 49
   at UserService.WebApi.Modules.AuthModule.<>c.<<RegisterAuthRoutes>b__0_1>d.MoveNext() in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi/Modules/AuthModule.cs:line 31
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 16:17:11.633 +03:00 [ERR] External service call failed
Flurl.Http.FlurlHttpException: Call failed with status code 401 (Unauthorized): POST http://localhost:8080/admin/realms/campuwise/users
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.RegisterAsync(String fullName, String password, String email) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 89
   at UserService.Application.User.Commands.RegisterCommandHandler.Handle(RegisterCommand request, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/User/Commands/RegisterCommand.cs:line 42
   at UserService.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/Behaviors/ValidationBehavior.cs:line 49
   at UserService.WebApi.Modules.AuthModule.<>c.<<RegisterAuthRoutes>b__0_1>d.MoveNext() in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi/Modules/AuthModule.cs:line 31
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 16:17:21.036 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5067/auth/register - 401 null application/json; charset=utf-8 26996.0274ms
2025-10-25 16:17:43.417 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5067/auth/register - application/json 86
2025-10-25 16:17:43.420 +03:00 [INF] Executing endpoint 'HTTP: POST /auth/register'
2025-10-25 16:18:45.184 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-10-25 16:18:45.296 +03:00 [INF] Now listening on: http://localhost:5067
2025-10-25 16:18:45.297 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-25 16:18:45.297 +03:00 [INF] Hosting environment: Development
2025-10-25 16:18:45.297 +03:00 [INF] Content root path: /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi
2025-10-25 16:18:51.092 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5067/auth/register - application/json 86
2025-10-25 16:18:51.105 +03:00 [WRN] Failed to determine the https port for redirect.
2025-10-25 16:18:51.109 +03:00 [INF] Executing endpoint 'HTTP: POST /auth/register'
2025-10-25 16:18:51.114 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-25 16:20:08.707 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-10-25 16:20:08.772 +03:00 [INF] Now listening on: http://localhost:5067
2025-10-25 16:20:08.773 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-25 16:20:08.773 +03:00 [INF] Hosting environment: Development
2025-10-25 16:20:08.773 +03:00 [INF] Content root path: /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi
2025-10-25 16:20:10.189 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5067/auth/register - application/json 86
2025-10-25 16:20:10.202 +03:00 [WRN] Failed to determine the https port for redirect.
2025-10-25 16:20:10.243 +03:00 [INF] Executing endpoint 'HTTP: POST /auth/register'
2025-10-25 16:20:10.285 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-25 16:20:26.494 +03:00 [INF] Executed endpoint 'HTTP: POST /auth/register'
2025-10-25 16:20:26.505 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Flurl.Http.FlurlHttpException: Call failed with status code 409 (Conflict): POST http://localhost:8080/admin/realms/campuwise/users
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.RegisterAsync(String fullName, String password, String email) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 89
   at UserService.Application.User.Commands.RegisterCommandHandler.Handle(RegisterCommand request, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/User/Commands/RegisterCommand.cs:line 42
   at UserService.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/Behaviors/ValidationBehavior.cs:line 49
   at UserService.WebApi.Modules.AuthModule.<>c.<<RegisterAuthRoutes>b__0_1>d.MoveNext() in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi/Modules/AuthModule.cs:line 31
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 16:20:26.523 +03:00 [ERR] External service call failed
Flurl.Http.FlurlHttpException: Call failed with status code 409 (Conflict): POST http://localhost:8080/admin/realms/campuwise/users
   at Flurl.Http.FlurlClient.HandleExceptionAsync(FlurlCall call, Exception ex, CancellationToken token)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at Flurl.Http.FlurlClient.SendAsync(IFlurlRequest request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at UserService.Infrastructure.KeycloakService.RegisterAsync(String fullName, String password, String email) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Infrastructure/External/KeycloakService.cs:line 89
   at UserService.Application.User.Commands.RegisterCommandHandler.Handle(RegisterCommand request, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/User/Commands/RegisterCommand.cs:line 42
   at UserService.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.Application/Behaviors/ValidationBehavior.cs:line 49
   at UserService.WebApi.Modules.AuthModule.<>c.<<RegisterAuthRoutes>b__0_1>d.MoveNext() in /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi/Modules/AuthModule.cs:line 31
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 16:20:36.936 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5067/auth/register - 409 null application/json; charset=utf-8 26748.8334ms
2025-10-25 16:20:51.201 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5067/auth/register - application/json 86
2025-10-25 16:20:51.211 +03:00 [INF] Executing endpoint 'HTTP: POST /auth/register'
2025-10-25 16:20:53.101 +03:00 [INF] Setting HTTP status code 201.
2025-10-25 16:20:53.101 +03:00 [INF] Executed endpoint 'HTTP: POST /auth/register'
2025-10-25 16:20:53.101 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5067/auth/register - 201 0 null 1901.3739ms
2025-10-25 19:49:17.668 +03:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-10-25 19:49:17.724 +03:00 [INF] Now listening on: http://localhost:5067
2025-10-25 19:49:17.725 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-25 19:49:17.725 +03:00 [INF] Hosting environment: Development
2025-10-25 19:49:17.725 +03:00 [INF] Content root path: /Users/ahmetsayan/Desktop/Projects/CampuWise/backend/services/user-service/src/UserService.WebApi
